# 无邪玩家互传插件

功能完善的玩家互传系统，支持传送请求、权限管理和智能拼音搜索功能。

## ✨ 功能特点

- **智能搜索**: 支持英文、拼音、拼音首字母模糊搜索
- **传送请求**: 支持传送到玩家和拉取玩家功能
- **权限管理**: 支持OP特权和冷却时间
- **用户友好**: 清晰的菜单界面和多选提示

## 🔧 安装步骤

### 1. 前置插件

请确保已安装以下前置插件：

- **聊天栏菜单** (版本 >= 0.4.0)
- **pip模块支持** (版本 >= 0.0.5) - 用于自动安装依赖

### 2. 安装插件

将插件文件夹放入 ToolDelta 的插件目录即可。

### 3. 自动依赖安装

插件会在首次启动时自动检测并安装所需的 `pypinyin` 库：

- 如果安装了"pip模块支持"插件，将自动安装依赖
- 如果自动安装失败，可手动安装：`pip install pypinyin`

## 🎮 使用方法

### 基本命令

```
.tpa to <玩家名>     - 请求传送到指定玩家
.tpa here <玩家名>   - 请求玩家传送到你这里
.tpa accept         - 接受传送请求
.tpa deny           - 拒绝传送请求
.tpa cancel         - 取消你发送的请求
.tpa list           - 查看待处理的请求
.tpa toggle         - 切换是否接受传送请求
.tpa <玩家名>       - 快捷请求传送到玩家
```

### 🔍 智能搜索功能

#### 英文搜索

```
.tpa abc            # 匹配: Abc123, abcdef 等
.tpa player         # 匹配: Player1, MyPlayer 等
```

#### 拼音搜索（需要pypinyin库）

```
.tpa zhang          # 匹配: 张三, 张小明 等
.tpa xiaoming       # 匹配: 小明, 李小明 等
```

#### 拼音首字母搜索

```
.tpa zs             # 匹配: 张三, 赵四 等
.tpa lxm            # 匹配: 李小明, 刘小美 等
```

### 搜索优先级

1. **完全匹配** - 精确匹配玩家名
2. **开头匹配** - 以搜索词开头的玩家名（英文/拼音/首字母）
3. **拼音匹配** - 拼音中包含搜索词
4. **包含匹配** - 玩家名中包含搜索词
5. **首字母匹配** - 拼音首字母序列匹配
6. **相似匹配** - 基于字符相似度的模糊匹配

## ⚙️ 配置选项

在插件配置文件中可以调整以下设置：

```json
{
    "传送超时时间": 60,
    "冷却时间": 5,
    "最大传送距离": 0,
    "是否允许跨维度传送": false,
    "触发命令": ["tpa", "tp", "传送"],
    "权限设置": {
        "所有玩家都可使用": true,
        "OP专用功能": ["强制传送", "无冷却传送"]
    }
}
```

## 📋 依赖要求

### 前置插件

- **聊天栏菜单** (>= 0.4.0) - 必需
- **pip模块支持** (>= 0.0.5) - 推荐，用于自动安装依赖

### Python库

- **pypinyin** (>= 0.47.0) - 自动安装，用于拼音搜索功能

## 🐛 常见问题

### 拼音搜索不工作

确保已安装pypinyin库：

```bash
pip install pypinyin
```

### 搜索结果太多

尝试输入更具体的搜索词，或使用拼音首字母搜索。

### 传送失败

检查目标玩家是否在线，以及是否有足够的权限。

## 📞 反馈与支持

如有问题或建议，请联系：QQ 445714414
